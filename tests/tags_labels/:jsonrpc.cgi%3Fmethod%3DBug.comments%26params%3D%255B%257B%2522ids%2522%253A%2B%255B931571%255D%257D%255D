{"error":null,"id":"http://bugzilla.suse.com/","result":{"bugs":{"931571":{"comments":[{"is_private":false,"count":0,"creator":"illumilore@gmail.com","attachment_id":null,"time":"2015-05-19T23:44:31Z","bug_id":931571,"author":"illumilore@gmail.com","text":"User-Agent:       Mozilla/5.0 (X11; Linux x86_64; rv:37.0) Gecko/20100101 Firefox/37.0\nBuild Identifier: \n\nWhen upgrading, I get a no space left on device, but df -h says that there is over 10GB left on /.\n\nReproducible: Always\n\n\n\nExpected Results:  \n$ df -h\nFilesystem           Size  Used Avail Use% Mounted on\n/dev/sda1             30G   17G   14G  55% /\ndevtmpfs             7.9G     0  7.9G   0% /dev\ntmpfs                7.9G   41M  7.8G   1% /dev/shm\ntmpfs                7.9G  2.4M  7.9G   1% /run\ntmpfs                7.9G     0  7.9G   0% /sys/fs/cgroup\n/dev/sda4             96M   22M   75M  23% /boot/efi\n/dev/sda1             30G   17G   14G  55% /var/log\n/dev/sda1             30G   17G   14G  55% /var/lib/pgsql\n/dev/sda1             30G   17G   14G  55% /var/lib/named\n/dev/sda6            179G  118G   61G  67% /mnt/win7\n/dev/sdb1            784G  608G  137G  82% /home\n/dev/sda1             30G   17G   14G  55% /opt\n/dev/sda1             30G   17G   14G  55% /.snapshots\n/dev/sda1             30G   17G   14G  55% /var/tmp\n/dev/sda1             30G   17G   14G  55% /var/spool\n/dev/sda1             30G   17G   14G  55% /var/opt\n/dev/sda1             30G   17G   14G  55% /var/lib/mailman\n/dev/sda1             30G   17G   14G  55% /var/crash\n/dev/sda1             30G   17G   14G  55% /usr/local\n/dev/sda1             30G   17G   14G  55% /tmp\n/dev/sda1             30G   17G   14G  55% /srv\n/dev/sda1             30G   17G   14G  55% /boot/grub2/x86_64-efi\n/dev/sda1             30G   17G   14G  55% /boot/grub2/i386-pc\n//192.168.0.6/media   32G  9.3G   23G  30% /mnt/data\n\n\n$ sudo zypper -v ref;sudo zypper -v dup\nVerbosity: 1\nInitializing Target\nSpecified repositories: \nChecking whether to refresh metadata for KDE:Applications\nRetrieving: repomd.xml ..........................................................................[done]\nRetrieving: repomd.xml ..........................................................................[done]\nRetrieving: repomd.xml.asc ......................................................................[done]\nRetrieving: repomd.xml.key ......................................................................[done]\nRetrieving: repomd.xml ..........................................................................[done]\n  Repository:       KDE:Applications                            \n  Key Name:         KDE OBS Project <KDE@build.opensuse.org>    \n  Key Fingerprint:  4E8E6DE2 961F3083 EAC50086 27C07017 6F88BB2F\n  Key Created:      Sun 31 Aug 2014 08:06:11 AM MDT             \n  Key Expires:      Tue 08 Nov 2016 07:06:11 AM MST             \n  Rpm Name:         gpg-pubkey-6f88bb2f-54032bd3                \nRetrieving: d59ea70ca9e07bfaa6fdbf3c11c801933af567b1eb27f892e8de6bb05a5bb362-primar[done (394.2 KiB/s)]\nRetrieving repository 'KDE:Applications' metadata ...............................................[done]\nBuilding repository 'KDE:Applications' cache ....................................................[done]\nChecking whether to refresh metadata for KDE:Unstable:Extra\nRetrieving: repomd.xml ..........................................................................[done]\nRetrieving: repomd.xml ..........................................................................[done]\nRetrieving: repomd.xml.asc ......................................................................[done]\nRetrieving: repomd.xml.key ......................................................................[done]\nRetrieving: repomd.xml ..........................................................................[done]\n  Repository:       KDE:Unstable:Extra                                        \n  Key Name:         KDE:Unstable OBS Project <KDE:Unstable@build.opensuse.org>\n  Key Fingerprint:  4A3E0756 26347342 E1A3F257 2E85BAEE 9EBD09C4              \n  Key Created:      Wed 05 Nov 2014 12:09:28 AM MST                           \n  Key Expires:      Fri 13 Jan 2017 12:09:28 AM MST                           \n  Rpm Name:         gpg-pubkey-9ebd09c4-5459cd28                              \nRetrieving: 8ae8dea79c3af21b007333c62631c48bf65226284bc57bd410ed97dd7de249a1-primary.xml.gz .....[done]\nRetrieving repository 'KDE:Unstable:Extra' metadata .............................................[done]\nBuilding repository 'KDE:Unstable:Extra' cache ..................................................[done]\nChecking whether to refresh metadata for nVidia Graphics Drivers\nRetrieving: repomd.xml ..........................................................................[done]\nRepository 'nVidia Graphics Drivers' is up to date.\nChecking whether to refresh metadata for openSUSE BuildService - Wine CVS Builds\nRetrieving: repomd.xml ..........................................................................[done]\nRepository 'openSUSE BuildService - Wine CVS Builds' is up to date.\nChecking whether to refresh metadata for Packman Repository\nRetrieving: repomd.xml ..........................................................................[done]\nRepository 'Packman Repository' is up to date.\nChecking whether to refresh metadata for games:tools\nRetrieving: repomd.xml ..........................................................................[done]\nRepository 'games:tools' is up to date.\nChecking whether to refresh metadata for google-chrome\nRetrieving: repomd.xml ..........................................................................[done]\nRepository 'google-chrome' is up to date.\nSkipping disabled repository 'home:Kieltux:nvidia'\nChecking whether to refresh metadata for home:dnh\nRetrieving: repomd.xml ..........................................................................[done]\nRepository 'home:dnh' is up to date.\nChecking whether to refresh metadata for kdefw5\nRetrieving: repomd.xml ..........................................................................[done]\nRepository 'kdefw5' is up to date.\nSkipping disabled repository 'openSUSE-13.2-0'\nChecking whether to refresh metadata for openSUSE:13.2:Update\nRetrieving: repomd.xml ..........................................................................[done]\nRepository 'openSUSE:13.2:Update' is up to date.\nChecking whether to refresh metadata for qt5\nRetrieving: repomd.xml ..........................................................................[done]\nRepository 'qt5' is up to date.\nSkipping disabled repository 'openSUSE-13.2-Debug'\nSkipping disabled repository 'openSUSE-13.2-Update-Debug'\nSkipping disabled repository 'openSUSE-13.2-Update-Debug-Non-Oss'\nChecking whether to refresh metadata for openSUSE-13.2-Non-Oss\nRetrieving: content .............................................................................[done]\nRetrieving: media ...............................................................................[done]\nRepository 'openSUSE-13.2-Non-Oss' is up to date.\nChecking whether to refresh metadata for openSUSE-13.2-Oss\nRetrieving: content .............................................................................[done]\nRetrieving: media ...............................................................................[done]\nRepository 'openSUSE-13.2-Oss' is up to date.\nSkipping disabled repository 'openSUSE-13.2-Source'\nChecking whether to refresh metadata for openSUSE-13.2-Update\nRetrieving: repomd.xml ..........................................................................[done]\nRepository 'openSUSE-13.2-Update' is up to date.\nChecking whether to refresh metadata for openSUSE-13.2-Update-Non-Oss\nRetrieving: repomd.xml ..........................................................................[done]\nRetrieving: repomd.xml ..........................................................................[done]\nRetrieving: repomd.xml.asc ......................................................................[done]\nRetrieving: repomd.xml.key ......................................................................[done]\nRetrieving: repomd.xml ..........................................................................[done]\n  Repository:       openSUSE-13.2-Update-Non-Oss                        \n  Key Name:         openSUSE Project Signing Key <opensuse@opensuse.org>\n  Key Fingerprint:  22C07BA5 34178CD0 2EFE22AA B88B2FD4 3DBDC284        \n  Key Created:      Mon 05 May 2014 02:37:40 AM MDT                     \n  Key Expires:      Thu 02 May 2024 02:37:40 AM MDT                     \n  Rpm Name:         gpg-pubkey-3dbdc284-53674dd4                        \nRetrieving: de3acac822ef474d29a29e3f03f5d776c7ffd2d28aa84aa9925ed2eab4827835-app-icon[done (5.6 KiB/s)]\nRetrieving: e51d18afe450b81437d673e540ed82eecfcc21ca28527f5cd371c330fb058045-updateinfo.xml.gz ..[done]\nRetrieving: 93d699313c7214a37526dac5fc44b0b3b0404c5ef32c7ba385cfdcf7bf1e2159-primary.xml.gz .....[done]\nRetrieving: f563afa432d4773eee2ea928ea6e63b8653c8c482ceccffc2e59f9294d50531f-suseda[done (176.6 KiB/s)]\nRetrieving: b1a5d8538cd7c0b982676a6fd6bf315edf032a54778b15d32648d678f2b1419e-deltainfo.xml.gz ...[done]\nRetrieving repository 'openSUSE-13.2-Update-Non-Oss' metadata ...................................[done]\nBuilding repository 'openSUSE-13.2-Update-Non-Oss' cache ........................................[done]\nAll repositories have been refreshed.\nVerbosity: 1\nWarning: You are about to do a distribution upgrade with all enabled repositories. Make sure these repositories are compatible before you continue. See 'man zypper' for more information about this command.\nInitializing Target\nChecking whether to refresh metadata for KDE:Applications\nChecking whether to refresh metadata for KDE:Unstable:Extra\nChecking whether to refresh metadata for nVidia Graphics Drivers\nChecking whether to refresh metadata for openSUSE BuildService - Wine CVS Builds\nChecking whether to refresh metadata for Packman Repository\nChecking whether to refresh metadata for games:tools\nChecking whether to refresh metadata for google-chrome\nChecking whether to refresh metadata for home:dnh\nChecking whether to refresh metadata for kdefw5\nChecking whether to refresh metadata for openSUSE:13.2:Update\nChecking whether to refresh metadata for qt5\nChecking whether to refresh metadata for openSUSE-13.2-Non-Oss\nChecking whether to refresh metadata for openSUSE-13.2-Oss\nChecking whether to refresh metadata for openSUSE-13.2-Update\nChecking whether to refresh metadata for openSUSE-13.2-Update-Non-Oss\nLoading repository data...\nReading installed packages...\nComputing distribution upgrade...\nForce resolution: No\nComputing upgrade...\n\nThe following 4 applications are going to be REMOVED:\n  Dolphin    \n  Konqueror  \n  KWrite     \n  Marble     \n\n\nThe following 29 packages are going to be upgraded:\n  dolphin                         15.04.1-1.3 -> 15.04.1-1.4                \n  flash-player                    11.2.202.457-2.48.1 -> 11.2.202.460-2.51.1\n  flash-player-kde4               11.2.202.457-2.48.1 -> 11.2.202.460-2.51.1\n  kate-plugins                    15.04.1-1.2 -> 15.04.1-1.3                \n  kcalc                           15.04.1-1.2 -> 15.04.1-1.3                \n  kcron                           15.04.1-1.2 -> 15.04.1-1.3                \n  kdeartwork4-screensaver         15.04.1-1.5 -> 15.04.1-1.6                \n  kdeartwork4-wallpapers          15.04.1-1.5 -> 15.04.1-1.6                \n  kdeartwork4-wallpapers-weather  15.04.1-1.5 -> 15.04.1-1.6                \n  kdebase4-libkonq                15.04.1-1.3 -> 15.04.1-1.4                \n  kdebase4-nsplugin               15.04.1-1.3 -> 15.04.1-1.4                \n  kdebase4-runtime                15.04.1-1.2 -> 15.04.1-1.3                \n  kde-l10n-ar                     15.04.1-3.1 -> 15.04.1-3.2                \n  kdepasswd                       15.04.1-1.3 -> 15.04.1-1.4                \n  kdialog                         15.04.1-1.3 -> 15.04.1-1.4                \n  keditbookmarks                  15.04.1-1.3 -> 15.04.1-1.4                \n  konqueror                       15.04.1-1.3 -> 15.04.1-1.4                \n  konqueror-plugins               15.04.1-1.3 -> 15.04.1-1.4                \n  kwrite                          15.04.1-1.2 -> 15.04.1-1.3                \n  libastro1                       15.04.1-1.2 -> 15.04.1-1.3                \n  libkgeomap                      15.04.1-3.1 -> 15.04.1-4.1                \n  libkgeomap2                     15.04.1-3.1 -> 15.04.1-4.1                \n  libkmahjongg                    15.04.1-1.2 -> 15.04.1-1.3                \n  libkonq5                        15.04.1-1.3 -> 15.04.1-1.4                \n  libmarblewidget21               15.04.1-1.2 -> 15.04.1-1.3                \n  marble                          15.04.1-1.2 -> 15.04.1-1.3                \n  marble-data                     15.04.1-1.2 -> 15.04.1-1.3                \n  marble-doc                      15.04.1-1.2 -> 15.04.1-1.3                \n  plasmoid-folderview             15.04.1-1.3 -> 15.04.1-1.4                \n\n\n29 packages to upgrade.\nOverall download size: 130.1 MiB. Already cached: 0 B  After the operation, additional 7.9 KiB will be \nused.\nContinue? [y/n/? shows all options] (y): y\n(Use arrows or pgUp/pgDown keys to scroll the text by lines or pages.)\n\nIn order to install 'flash-player', you must agree to terms of the following license agreement:\n\nADOBE SYSTEMS INCORPORATED\nPersonal Computer Software License Agreement\n\n1. WARRANTY DISCLAIMER, BINDING AGREEMENT AND ADDITIONAL TERMS AND\nAGREEMENTS.\n1.1 WARRANTY DISCLAIMER. THE SOFTWARE AND OTHER INFORMATION IS\nDELIVERED TO YOU “AS IS” AND WITH ALL FAULTS. ADOBE, ITS SUPPLIERS AND\nCERTIFICATION AUTHORITIES DO NOT AND CANNOT WARRANT THE PERFORMANCE\nOR RESULTS YOU MAY OBTAIN BY USING THE SOFTWARE, CERTIFICATE AUTHORITY\nSERVICES OR OTHER THIRD PARTY OFFERINGS. EXCEPT TO THE EXTENT ANY\nWARRANTY, CONDITION, REPRESENTATION OR TERM CANNOT OR MAY NOT BE\nEXCLUDED OR LIMITED BY LAW APPLICABLE TO YOU IN YOUR JURISDICTION,\nADOBE AND ITS SUPPLIERS AND CERTIFICATION AUTHORITIES MAKE NO\nWARRANTIES CONDITIONS, REPRESENTATIONS, OR TERMS (EXPRESS OR IMPLIED\nWHETHER BY STATUTE, COMMON LAW, CUSTOM, USAGE OR OTHERWISE) AS TO ANY\nMATTER INCLUDING WITHOUT LIMITATION NONINFRINGEMENT OF THIRD PARTY\nRIGHTS, MERCHANTABILITY, INTEGRATION, SATISFACTORY QUALITY, OR FITNESS\nFOR ANY PARTICULAR PURPOSE. THE PROVISIONS OF SECTIONS 1.1 AND 10 SHALL\nDo you agree with the terms of the license? [yes/no] (no): yes\ncommitting\nRetrieving package kate-plugins-15.04.1-1.3.x86_64               (1/29), 658.1 KiB (  4.9 MiB unpacked)\nRetrieving: kate-plugins-15.04.1-1.3.x86_64.rpm ...................................[done (374.0 KiB/s)]\nRetrieving package kcalc-15.04.1-1.3.x86_64                      (2/29), 167.2 KiB (546.3 KiB unpacked)\nRetrieving: kcalc-15.04.1-1.3.x86_64.rpm ..........................................[done (194.6 KiB/s)]\nRetrieving package kcron-15.04.1-1.3.x86_64                      (3/29), 235.9 KiB (456.9 KiB unpacked)\nRetrieving: kcron-15.04.1-1.3.x86_64.rpm ..........................................[done (519.9 KiB/s)]\nRetrieving package kde-l10n-ar-15.04.1-3.2.noarch                (4/29),   2.1 MiB (  5.7 MiB unpacked)\nRetrieving: kde-l10n-ar-15.04.1-3.2.noarch.rpm ....................................[done (613.3 KiB/s)]\nRetrieving package kdeartwork4-wallpapers-15.04.1-1.6.noarch     (5/29),  77.0 MiB ( 77.5 MiB unpacked)\nRetrieving: kdeartwork4-wallpapers-15.04.1-1.6.noarch.rpm .........................[done (863.9 KiB/s)]\nRetrieving package kdebase4-runtime-15.04.1-1.3.x86_64           (6/29),   8.6 MiB ( 20.6 MiB unpacked)\nRetrieving: kdebase4-runtime-15.04.1-1.3.x86_64.rpm ...............................[done (837.4 KiB/s)]\nRetrieving package libastro1-15.04.1-1.3.x86_64                  (7/29), 109.1 KiB (246.4 KiB unpacked)\nRetrieving: libastro1-15.04.1-1.3.x86_64.rpm ......................................[done (156.4 KiB/s)]\nRetrieving package libkmahjongg-15.04.1-1.3.x86_64               (8/29),   1.6 MiB (  6.4 MiB unpacked)\nRetrieving: libkmahjongg-15.04.1-1.3.x86_64.rpm ...................................[done (758.9 KiB/s)]\nRetrieving package libkonq5-15.04.1-1.4.x86_64                   (9/29),  94.2 KiB (264.2 KiB unpacked)\nRetrieving: libkonq5-15.04.1-1.4.x86_64.rpm .....................................................[done]\nRetrieving package kwrite-15.04.1-1.3.x86_64                    (10/29),  76.2 KiB (193.7 KiB unpacked)\nRetrieving: kwrite-15.04.1-1.3.x86_64.rpm .......................................................[done]\nRetrieving package kdeartwork4-wallpapers-weather-15.04.1-1.6.noarch\n                                                                (11/29),   8.3 MiB (  8.4 MiB unpacked)\nRetrieving: kdeartwork4-wallpapers-weather-15.04.1-1.6.noarch.rpm .................[done (816.6 KiB/s)]\nRetrieving package keditbookmarks-15.04.1-1.4.x86_64            (12/29), 131.7 KiB (444.6 KiB unpacked)\nRetrieving: keditbookmarks-15.04.1-1.4.x86_64.rpm ...............................................[done]\nRetrieving package kdialog-15.04.1-1.4.x86_64                   (13/29),  61.2 KiB (135.7 KiB unpacked)\nRetrieving: kdialog-15.04.1-1.4.x86_64.rpm ........................................[done (198.3 KiB/s)]\nRetrieving package kdebase4-nsplugin-15.04.1-1.4.x86_64         (14/29), 132.7 KiB (405.6 KiB unpacked)\nRetrieving: kdebase4-nsplugin-15.04.1-1.4.x86_64.rpm ............................................[done]\nRetrieving package kdeartwork4-screensaver-15.04.1-1.6.x86_64   (15/29), 630.7 KiB (  3.6 MiB unpacked)\nRetrieving: kdeartwork4-screensaver-15.04.1-1.6.x86_64.rpm ........................[done (702.3 KiB/s)]\nRetrieving package libmarblewidget21-15.04.1-1.3.x86_64         (16/29),   1.4 MiB (  4.6 MiB unpacked)\nRetrieving: libmarblewidget21-15.04.1-1.3.x86_64.rpm ..............................[done (834.1 KiB/s)]\nRetrieving package plasmoid-folderview-15.04.1-1.4.x86_64       (17/29), 177.5 KiB (556.7 KiB unpacked)\nRetrieving: plasmoid-folderview-15.04.1-1.4.x86_64.rpm ............................[done (438.1 KiB/s)]\nRetrieving package kdepasswd-15.04.1-1.4.x86_64                 (18/29), 197.8 KiB (322.6 KiB unpacked)\nRetrieving: kdepasswd-15.04.1-1.4.x86_64.rpm ....................................................[done]\nRetrieving package kdebase4-libkonq-15.04.1-1.4.x86_64          (19/29),  87.9 KiB (243.6 KiB unpacked)\nRetrieving: kdebase4-libkonq-15.04.1-1.4.x86_64.rpm .............................................[done]\nRetrieving package marble-15.04.1-1.3.x86_64                    (20/29),   1.5 MiB (  5.9 MiB unpacked)\nRetrieving: marble-15.04.1-1.3.x86_64.rpm .........................................[done (944.8 KiB/s)]\nRetrieving package libkgeomap-15.04.1-4.1.x86_64                (21/29),  28.4 KiB ( 52.6 KiB unpacked)\nRetrieving: libkgeomap-15.04.1-4.1.x86_64.rpm ...................................................[done]\nRetrieving package konqueror-plugins-15.04.1-1.4.x86_64         (22/29), 486.4 KiB (  1.8 MiB unpacked)\nRetrieving: konqueror-plugins-15.04.1-1.4.x86_64.rpm ..............................[done (285.4 KiB/s)]\nRetrieving package dolphin-15.04.1-1.4.x86_64                   (23/29),   1.1 MiB (  2.9 MiB unpacked)\nRetrieving: dolphin-15.04.1-1.4.x86_64.rpm ........................................[done (584.6 KiB/s)]\nRetrieving package marble-data-15.04.1-1.3.noarch               (24/29),  13.4 MiB ( 22.5 MiB unpacked)\nRetrieving: marble-data-15.04.1-1.3.noarch.rpm ....................................[done (694.0 KiB/s)]\nRetrieving package libkgeomap2-15.04.1-4.1.x86_64               (25/29), 117.2 KiB (397.3 KiB unpacked)\nRetrieving: libkgeomap2-15.04.1-4.1.x86_64.rpm ..................................................[done]\nRetrieving package konqueror-15.04.1-1.4.x86_64                 (26/29),   1.3 MiB (  4.1 MiB unpacked)\nRetrieving: konqueror-15.04.1-1.4.x86_64.rpm ......................................[done (597.2 KiB/s)]\nRetrieving package marble-doc-15.04.1-1.3.noarch                (27/29),   3.0 MiB (  3.1 MiB unpacked)\nRetrieving: marble-doc-15.04.1-1.3.noarch.rpm .....................................[done (616.2 KiB/s)]\nRetrieving package flash-player-11.2.202.460-2.51.1.x86_64      (28/29),   7.3 MiB ( 20.9 MiB unpacked)\nRetrieving delta: ./x86_64/flash-player-11.2.202.457_11.2.202.460-2.48.1_2.51.1.x86_64.drpm, 307.3 KiB\nRetrieving: flash-player-11.2.202.457_11.2.202.460-2.48.1_2.51.1.x86_64.drpm ......[done (307.2 KiB/s)]\nApplying delta: ./flash-player-11.2.202.457_11.2.202.460-2.48.1_2.51.1.x86_64.drpm ..............[done]\nRetrieving package flash-player-kde4-11.2.202.460-2.51.1.x86_64 (29/29), 155.5 KiB (560.8 KiB unpacked)\nRetrieving delta: ./x86_64/flash-player-kde4-11.2.202.457_11.2.202.460-2.48.1_2.51.1.x86_64.drpm, 26.0 KiB\nRetrieving: flash-player-kde4-11.2.202.457_11.2.202.460-2.48.1_2.51.1.x86_64.drpm ...............[done]\nApplying delta: ./flash-player-kde4-11.2.202.457_11.2.202.460-2.48.1_2.51.1.x86_64.drpm .........[done]\nChecking for file conflicts: ....................................................................[done]\n( 1/29) Installing: kate-plugins-15.04.1-1.3 ....................................................[done]\n( 2/29) Installing: kcalc-15.04.1-1.3 ...........................................................[done]\n( 3/29) Installing: kcron-15.04.1-1.3 ...........................................................[done]\n( 4/29) Installing: kde-l10n-ar-15.04.1-3.2 .....................................................[done]\n( 5/29) Installing: kdeartwork4-wallpapers-15.04.1-1.6 .........................................[error]\nInstallation of kdeartwork4-wallpapers-15.04.1-1.6 failed:\nError: Subprocess failed. Error: RPM failed: error: unpacking of archive failed on file /usr/share/wallpapers/Curls_on_Green/contents/images/1920x1200.jpg: cpio: rename failed - No space left on device\nerror: kdeartwork4-wallpapers-15.04.1-1.6.noarch: install failed\nerror: kdeartwork4-wallpapers-15.04.1-1.5.noarch: erase skipped\n\n\nAbort, retry, ignore? [a/r/i] (a)","creation_time":"2015-05-19T23:44:31Z","id":6378370},{"is_private":false,"count":1,"creator":"bwiedemann@suse.com","attachment_id":null,"time":"2015-05-20T14:00:13Z","bug_id":931571,"author":"bwiedemann@suse.com","text":"likely btrfs+snapper-related\n\ntry\nbtrfs filesystem df /\n\nand if you want the cure-all:\nfor s in /.snapshots/*/snapshot ; do btrfs subvolume delete $s ; done","creation_time":"2015-05-20T14:00:13Z","id":6379347},{"is_private":true,"count":2,"creator":"mge@suse.com","attachment_id":null,"time":"2015-05-20T18:33:44Z","bug_id":931571,"author":"mge@suse.com","text":"(In reply to Bernhard Wiedemann from comment #1)\n> likely btrfs+snapper-related\n> \n> try\n> btrfs filesystem df /\n> \n> and if you want the cure-all:\n> for s in /.snapshots/*/snapshot ; do btrfs subvolume delete $s ; done\n\nBernhard, you really should not suggest those low level\nactions, but propose to use snapper and primarily the\n\"btrfsmaintenance\" package for these activities.\n\nThanks!","creation_time":"2015-05-20T18:33:44Z","id":6379647},{"is_private":false,"count":3,"creator":"bwiedemann@suse.com","attachment_id":null,"time":"2015-05-20T20:47:12Z","bug_id":931571,"author":"bwiedemann@suse.com","text":"*** Bug 931725 has been marked as a duplicate of this bug. ***","creation_time":"2015-05-20T20:47:12Z","id":6379746},{"is_private":false,"count":4,"creator":"illumilore@gmail.com","attachment_id":null,"time":"2015-05-20T21:08:50Z","bug_id":931571,"author":"illumilore@gmail.com","text":"$ btrfs filesystem df /\nData, single: total=20.01GiB, used=8.48GiB\nSystem, single: total=4.00MiB, used=16.00KiB\nMetadata, single: total=1.01GiB, used=320.94MiB\nGlobalReserve, single: total=112.00MiB, used=0.00B\n\nthe df information seems wrong as well. It says the total for data single is 20GB, when root partition is 30GB.","creation_time":"2015-05-20T21:08:50Z","id":6379765},{"is_private":false,"count":5,"creator":"illumilore@gmail.com","attachment_id":null,"time":"2015-05-20T21:09:44Z","bug_id":931571,"author":"illumilore@gmail.com","text":"That was after I removed all but two of the snapper snapshots.","creation_time":"2015-05-20T21:09:44Z","id":6379766},{"is_private":false,"count":6,"creator":"aschnell@suse.com","attachment_id":null,"time":"2015-05-21T08:53:18Z","bug_id":931571,"author":"aschnell@suse.com","text":"Setting P0 is not allowed for users.","creation_time":"2015-05-21T08:53:18Z","id":6380284},{"is_private":false,"count":7,"creator":"illumilore@gmail.com","attachment_id":null,"time":"2015-05-22T01:05:09Z","bug_id":931571,"author":"illumilore@gmail.com","text":"Only after running btrfs fi balance /mountpoint -dusage=50 after the snapshots command did some of the missing data appear to come back.","creation_time":"2015-05-22T01:05:09Z","id":6381500},{"is_private":false,"count":8,"creator":"aschnell@suse.com","attachment_id":null,"time":"2015-06-01T13:28:39Z","bug_id":931571,"author":"aschnell@suse.com","text":"Btrfs deletes snapshot asynchronously, so after the delete command (both\nbtrfs and snapper) you still have to wait to get the disk space back (or use btrfs commands that wait for the cleanup to have finished). That might\nexplain why the disk space appeared after the balance command.\n\nIf really a balance command is needed it looks like a kernel problem to me.","creation_time":"2015-06-01T13:28:39Z","id":6391773},{"is_private":false,"count":9,"creator":"juanansolis@gmail.com","attachment_id":null,"time":"2015-06-02T11:38:28Z","bug_id":931571,"author":"juanansolis@gmail.com","text":"I had the same problem on a production server with opensuse 13.2. I solved it deleting several snapshots, but server was down till I found the problem. I suggest to reduce the number of old snapshots stored by default. 10 snapshots are too much space consuming. Maybe 2 or 3 would be enough.","creation_time":"2015-06-02T11:38:28Z","id":6393270},{"is_private":false,"count":10,"creator":"mge@suse.com","attachment_id":null,"time":"2015-06-02T11:46:56Z","bug_id":931571,"author":"mge@suse.com","text":"(In reply to Juan Antonio Solis from comment #9)\n> I had the same problem on a production server with opensuse 13.2. I solved\n> it deleting several snapshots, but server was down till I found the problem.\n> I suggest to reduce the number of old snapshots stored by default. 10\n> snapshots are too much space consuming. Maybe 2 or 3 would be enough.\n\nIn my experience, keeping 20-30 snapshots is no problem, if your\ndisk size follows our recommendation (at least 16 GiB for \"/\"),\nand if you are doing regular semi-cummulative updates (i.e. weekly).\n\nI agree though that for Factory or for smaller \"/\" partitions\nthe world looks differently.\n\nIn addition, I strongly suggest to install the \"btrfsmaintenance\"\npackage and tweak it to your needs and environment: that way you\nget balancing and scrubbing regularily, and you can really enjoy(!:-)\nusing btrfs, ... MgE","creation_time":"2015-06-02T11:46:56Z","id":6393296},{"is_private":false,"count":11,"creator":"illumilore@gmail.com","attachment_id":null,"time":"2015-06-02T18:19:52Z","bug_id":931571,"author":"illumilore@gmail.com","text":">In my experience, keeping 20-30 snapshots is no problem, if your\ndisk size follows our recommendation (at least 16 GiB for \"/\"),\n\n/ has over 30GB and my system was basically hosed from only 20 snapshots in a couple of weeks.\n\n>and you can really enjoy(!:-)\nusing btrfs,\n\nIt is hard to enjoy btrfs given how opensuse implements it, with system breaking bugs like this one from a new install. If btrfsmaintenance will get rid of snapshots before they cause the system to stop working from lack of free data, then why wouldn't opensuse people put that in by default?","creation_time":"2015-06-02T18:19:52Z","id":6394193},{"is_private":false,"count":12,"creator":"juanansolis@gmail.com","attachment_id":null,"time":"2015-06-02T22:54:47Z","bug_id":931571,"author":"juanansolis@gmail.com","text":"First of all, thank you for your answer and suggestions.\nMy root partition has 40 Gb and the btrfsmaintenance was installed, although I had not done any changes in any configuration tool. I will try to study more about btrfs. It seems it is useful for a server which is maintained and updated in an unattended way through cron. \n\nBut I think this is a very serious bug. If anyone does not tweak and do \"regular semi-cummulative updates\" (I still have to find out how to do it) on his desktop or laptop computer, will it run out of space in some months?\n\nI have installed opensuse 13.2 on some computers of friends and colleagues of mine, and now I am afraid they will suffer this problem soon. On my own personal computer I did an upgrade from 13.1 and my root partition is still ext4, so I cannot check how btrfs works on a laptop computer with KDE.\n\nLet's keep opensuse as a linux for open minds, not only for geeks ;-)\n\nThank you for your effort!","creation_time":"2015-06-02T22:54:47Z","id":6394470},{"is_private":false,"count":13,"creator":"mge@suse.com","attachment_id":null,"time":"2015-06-03T10:06:35Z","bug_id":931571,"author":"mge@suse.com","text":"While thinking about this and checking on my system (which is\nSUSE Linux Enterprise 12, but the difference should be minimal),\nI realized that there might be one additional issue on typical\none-user machines (compared to servers): the cleanup process\n(/etc/cron.daily/suse.de-snapper) is not started often enough,\nthus the limits defined in /etc/snapper/configs/root are not\nenforced early enough.\n\n@Arvin: shouldn't we trigger the snapshot cleanup also on an\nhourly basis (instead of daily)?","creation_time":"2015-06-03T10:06:35Z","id":6395098},{"is_private":false,"count":14,"creator":"mge@suse.com","attachment_id":null,"time":"2015-06-03T10:12:02Z","bug_id":931571,"author":"mge@suse.com","text":"One more question: should we reconsider the default limits for \"/\" ??\n\nThey should be rather low and people may enhance them, if there\nis a real need for them.\n\nFor example, I have this:\n\n# grep -Ev \"^#|^$\" /etc/snapper/configs/root\nSUBVOLUME=\"/\"\nFSTYPE=\"btrfs\"\nALLOW_USERS=\"\"\nALLOW_GROUPS=\"\"\nSYNC_ACL=\"no\"\nBACKGROUND_COMPARISON=\"yes\"\nNUMBER_CLEANUP=\"yes\"\nNUMBER_MIN_AGE=\"1800\"\nNUMBER_LIMIT=\"8\"\nNUMBER_LIMIT_IMPORTANT=\"8\"\nTIMELINE_CREATE=\"no\"\nTIMELINE_CLEANUP=\"yes\"\nTIMELINE_MIN_AGE=\"1800\"\nTIMELINE_LIMIT_HOURLY=\"0\"\nTIMELINE_LIMIT_DAILY=\"0\"\nTIMELINE_LIMIT_MONTHLY=\"0\"\nTIMELINE_LIMIT_YEARLY=\"0\"\nEMPTY_PRE_POST_CLEANUP=\"yes\"\nEMPTY_PRE_POST_MIN_AGE=\"1800\"","creation_time":"2015-06-03T10:12:02Z","id":6395114},{"is_private":false,"count":15,"creator":"aschnell@suse.com","attachment_id":null,"time":"2015-06-03T10:30:46Z","bug_id":931571,"author":"aschnell@suse.com","text":"Instead of downsizing snapper to a state where we can just not install it\nany longer we should fix our base tools:\n\n1. 'df' does not work for btrfs.\n\n2. the output of 'btrfs fi df' is incomprehensibly.\n\n3. 'zypper' does not take into account that on btrfs with snapshots\n   overwriting files does not give back the disk space of the old file. So it\n   should not report \"additional 7.9 KiB will be used\" when likely several\n   hundreds MiB will be used. (AFAIK this was fixed by now.)","creation_time":"2015-06-03T10:30:46Z","id":6395149},{"is_private":false,"count":16,"creator":"illumilore@gmail.com","attachment_id":null,"time":"2015-06-03T19:08:15Z","bug_id":931571,"author":"illumilore@gmail.com","text":"What is snapper cleanup is called after every install/upgrade action, and then if there is less than, say 5GB left on the device, it will start removing old snapshots and then doing the balance/dusage command to free up the space? And make whether or not snapper is installed on the system an option at installation? Along with fixing btrfs show fi and df.","creation_time":"2015-06-03T19:08:15Z","id":6395936},{"is_private":false,"count":17,"creator":"mge@suse.com","attachment_id":null,"time":"2015-06-04T07:53:52Z","bug_id":931571,"author":"mge@suse.com","text":"(In reply to ill lume from comment #16)\n\n> What is snapper cleanup is called after every install/upgrade action,\n\nAs a default, this seems a bit too heavy to me, but as an option it sounds\nuseful, indeed. We actually have the framework already, cf.:\n        /usr/lib/zypp/plugins/commit/btrfs-defrag-plugin.py\n(package \"btrfsmaintainance\").\n\n> and then if there is less than, say 5GB left on the device, it will start\n> removing old snapshots and then doing the balance/dusage command to free up\n> the space?\n\nFree-space-based decisions are being worked on; it needs btrfs subvolume\nquotas and snapper working together.\n\n> And make whether or not snapper is installed on the system an\n> option at installation?\n\nThis is already there in SUSE Linux Enterprise 12 and also\nopenSUSE 13.2 (screenshot attached).","creation_time":"2015-06-04T07:53:52Z","id":6396420},{"is_private":false,"count":18,"creator":"mge@suse.com","attachment_id":636673,"time":"2015-06-04T07:56:58Z","bug_id":931571,"author":"mge@suse.com","text":"Created attachment 636673\nScreenshot from openSUSE 13.2 installation with the switch to disable snapshotting","creation_time":"2015-06-04T07:56:58Z","id":6396424},{"is_private":false,"count":19,"creator":"juanansolis@gmail.com","attachment_id":null,"time":"2015-06-04T10:00:03Z","bug_id":931571,"author":"juanansolis@gmail.com","text":"Since my server failure I am discovering all the benefits Snapper has, and it is an amazing tool. I admit that I should have studied it before installing it, but as almost everybody in the IT world, I have much work and not so much time and I had not done it yet. When I did the 13.2 fresh installation and saw that the suggested partition system was btrfs, I thought that if opensuse was suggesting it, it was because it had been thoroughly tested (I would not have thought the same with ubuntu, seriously) and was safe to install, so I accepted the default offered configuration.\n\nIf I did this way, probably most standard users that install opensuse in their desktops would do the same and will accept opensuse installator proposals even unknowing what they means and expecting that the default configuration will work fine. I installed opensuse to friends of mine who does not want to know anything about snapshots or anything beyond how to browse Internet, using office, managing photos, etc.\n\nSo the system should be able to manage the space automatically and to adapt the number of snapshots stored to the actual space remaining. As Matthias said, maybe a low number of snapshots stored could be enough for desktop computers. And IT people will be able to configure their servers if they need more (IT people who study more than I do, I am afraid)\n\nOr even maybe an opensuse server version and a desktop one? It is the only thing I liked from Ubuntu (I do not know if they still have it).\n\nP.D: Sorry for writing so much, but maybe it is worthy for you to know some users experience.","creation_time":"2015-06-04T10:00:03Z","id":6396622},{"is_private":false,"count":20,"creator":"tiwai@suse.com","attachment_id":null,"time":"2015-06-15T12:43:42Z","bug_id":931571,"author":"tiwai@suse.com","text":"Changed the component, as it's no direct kernel bug.","creation_time":"2015-06-15T12:43:42Z","id":6412076},{"is_private":false,"count":21,"creator":"chcao@suse.com","attachment_id":null,"time":"2015-06-18T08:27:16Z","bug_id":931571,"author":"chcao@suse.com","text":"Hi David, I'm not quite sure whether it is right to assign it to you, please feel free to reassign, thank you!","creation_time":"2015-06-18T08:27:16Z","id":6416709},{"is_private":false,"count":22,"creator":"kolAflash@kolAhilft.de","attachment_id":null,"time":"2015-10-24T01:28:56Z","bug_id":931571,"author":"kolAflash@kolAhilft.de","text":"I guess the cleanest solution for this would be a possibility, to set a maximum disk-usage.\nThink of setting a limit of xxx MB or yyy % of disk-space for snapshots. I guess the technical problem for this would be how to check this limit dynamically.\n\nE.g. someone deletes some large, no longer needed files to free enough space for storing other large files at the same time. So at that moment it has to be realised that old snapshots have to be deleted.\n\nI think this is pretty much the behaviour needed for a usual enduser (who maybe doesn't know anything about snapshots). So such a limit should be set by default (e.g. 10% of disk-space).\nAn experienced user who's counting on snapshots can always disable this limit and use the already existing ways to limit snapshots and keep an eye on the free space himself.\n\nBtw.\nMaybe related/duplicate?\nhttps://bugzilla.opensuse.org/show_bug.cgi?id=930893","creation_time":"2015-10-24T01:28:56Z","id":6562154},{"is_private":false,"count":23,"creator":"mge@suse.com","attachment_id":null,"time":"2015-10-24T02:19:09Z","bug_id":931571,"author":"mge@suse.com","text":"(In reply to kolA flash from comment #22)\n> I guess the cleanest solution for this would be a possibility, to set a\n> maximum disk-usage.\n> Think of setting a limit of xxx MB or yyy % of disk-space for snapshots.\n\nYes,indeed. See my comment#17 above:\nthis is called \"subvolume quota\", and it is being worked on.\n\n> I guess the technical problem for this would be how to check this limit\n> dynamically.\n\nWell, snapper could just do it, when creating or removing snapshots, ...","creation_time":"2015-10-24T02:19:09Z","id":6562156},{"is_private":false,"count":24,"creator":"kolAflash@kolAhilft.de","attachment_id":null,"time":"2015-10-24T10:59:02Z","bug_id":931571,"author":"kolAflash@kolAhilft.de","text":"(In reply to Matthias Eckermann from comment #23)\n> (In reply to kolA flash from comment #22)\n> > [...]\n> > I guess the technical problem for this would be how to check this limit\n> > dynamically.\n> \n> Well, snapper could just do it, when creating or removing snapshots, ...\n\nBut what happens if the user's deleting files? Won't the snapshots implicitly grow at that moment, without snapper being currently active?\n\nI guess that's a problem. And if the users deleting some GB files to free necessary space for other GB files he copies onto disk in the next moment, it won't be enough to check the snapshots hourly.\nI don't have a lot experience with quotas, but maybe they are a possible solution for this...","creation_time":"2015-10-24T10:59:02Z","id":6562206},{"is_private":false,"count":25,"creator":"mge@suse.com","attachment_id":null,"time":"2015-10-24T12:58:01Z","bug_id":931571,"author":"mge@suse.com","text":"(In reply to kolA flash from comment #24)\n> (In reply to Matthias Eckermann from comment #23)\n> > (In reply to kolA flash from comment #22)\n> > > [...]\n> > > I guess the technical problem for this would be how to check this limit\n> > > dynamically.\n> > \n> > Well, snapper could just do it, when creating or removing snapshots, ...\n> \n> But what happens if the user's deleting files? Won't the snapshots\n> implicitly grow at that moment, without snapper being currently active?\n\nWell, I would put it this way: when deleting a file which is CoWed\n(Copy-on-Write-ed), the total space required in the \"pool\"\n(this is the whole btrfs partition) will not be reduced, because\nreferences to the blocks are still held.\n\nImportant: this is only relevant for files which are CoWed (i.e.\neither snapshotted or copied as a RefLink). For \"normal\" files\nwhich are just single, a delete is a delete.\n\n> I guess that's a problem. And if the users deleting some GB files to free\n> necessary space for other GB files he copies onto disk in the next moment,\n> it won't be enough to check the snapshots hourly.\n\nAs said, files which are not CoWed, are not affected, however\nif you are discussing a CoWed file, then the space indeed is\nnot freed, when you delete the file itself, but once you are\ncalling \"snapper rm ...\" -- and then we are back in good shape,\nbecause snapper can take control.\n\nAdmittedly that's kind of \"surprising\" behaviour for people who\ncome from \"normal\" unix filesystems. But for people having worked\nwith CoW-filesystems before, it's kind of \"business as usual\":)\n\nThat \"surprising\" factor is btw. one of the reasons, why for SUSE Linux\nEnterprise 12 we have chosen to use xfs as the default for DATA and\nbtrfs for the OS: Administrators who know the specifics of CoW filesystems\ncan do a lot with it (snapshotting of data, deduplication, ...), and are\nsupported, those who don't know yet have a more relaxed life with xfs,\nbut they can't enjoy the benefits of btrfs either.\n\nI am personally using btrfs for \"/\" for more than 5 years now, and for\n\"/home\" for about 4 (including snapshots for /home using pam_snapper).\n\n> I don't have a lot experience with quotas, but maybe they are a possible\n> solution for this...\n\nWell, proper quota monitoring will definitely help, going forward.","creation_time":"2015-10-24T12:58:01Z","id":6562217},{"is_private":false,"count":26,"creator":"astieger@suse.com","attachment_id":null,"time":"2016-02-18T20:41:44Z","bug_id":931571,"author":"astieger@suse.com","text":"*** Bug 967147 has been marked as a duplicate of this bug. ***","creation_time":"3016-02-18T20:41:44Z","id":6690341}]}},"comments":{}}}
